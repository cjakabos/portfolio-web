# ===========================================================================
# CloudApp Platform — Environment Variables
# ===========================================================================
# USAGE:
#   cp .env.example .env    # then edit .env with real values
#   docker compose -f docker-compose-infrastructure.yml up -d
#   docker compose -f docker-compose-app.yml up -d
#
# NEVER commit .env to version control.
# ===========================================================================

# --- JWT Authentication ---------------------------------------------------
# REQUIRED — generate: openssl rand -base64 48
JWT_SECRET=CHANGE_ME_GENERATE_WITH_openssl_rand_base64_48
# Token lifetime in ms (default 4h; was 10 days — reduced for security)
JWT_EXPIRATION_MS=14400000

# --- Internal Service-to-Service Auth ------------------------------------
# Generate: openssl rand -hex 32
INTERNAL_SERVICE_TOKEN=

# --- PostgreSQL — CloudApp ------------------------------------------------
POSTGRES_USER=websitemaster
POSTGRES_PASSWORD=CHANGE_ME
POSTGRES_DB=cloudappdb

# --- PostgreSQL — ML Pipeline ---------------------------------------------
POSTGRES_ML_USER=segmentmaster
POSTGRES_ML_PASSWORD=CHANGE_ME
POSTGRES_ML_DB=segmentationdb

# --- MySQL — Petstore -----------------------------------------------------
MYSQL_ROOT_USERNAME=root
MYSQL_ROOT_PASSWORD=CHANGE_ME
MYSQL_DATABASE=petstore

# --- MongoDB — Chat -------------------------------------------------------
MONGO_USER=websitemaster
MONGO_PASSWORD=CHANGE_ME
MONGO_DB=cloudappdb

# --- MongoDB — AI A/B Testing --------------------------------------------
MONGO_ABTEST_USER=admin
MONGO_ABTEST_PASSWORD=CHANGE_ME
MONGO_ABTEST_ORCH_USER=orchestration_user
MONGO_ABTEST_ORCH_PASSWORD=CHANGE_ME

# --- Jira Integration (extract token from compose!) -----------------------
JIRA_DOMAIN=https://your-instance.atlassian.net
JIRA_API_TOKEN=CHANGE_ME
JIRA_PROJECT_KEY=PROJ
JIRA_EMAIL=you@example.com

# --- Ollama / LLM --------------------------------------------------------
LLM_MODEL=qwen3:1.7b
LLM_MODEL_EMBEDDING=qwen3-embedding:4b

# --- OpenTelemetry --------------------------------------------------------
OTEL_ENABLED=true

# --- Grafana (metrics dashboard) ------------------------------------------
GRAFANA_PASSWORD=CHANGE_ME

# --- Module federation
CLOUDAPP_URL=http://next-nginx-jwt:80/cloudapp
PETSTORE_URL=http://next-nginx-jwt:80/petstore
VEHICLES_URL=http://next-nginx-jwt:80/vehicles
ML_URL=http://next-nginx-jwt:80/mlops-segmentation

# --- AI Orchestration layer
CHROMA_HOST=chromadb
CHROMA_PORT=8123
CHROMA_COLLECTION=user_documents
CHROMA_PERSIST_DIR=/data/chroma

ENABLE_CHECKPOINTING=true
ENABLE_HITL=true
ENABLE_PARALLEL=true
ENABLE_ERROR_HANDLING=true
ENABLE_AB_TESTING=true

REDIS_MAX_CONNECTIONS=50
ENVIRONMENT=development

LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=2000
RAG_SEARCH_K=3

HTTP_TIMEOUT=10
HTTP_MAX_CONNECTIONS=100
HTTP_MAX_KEEPALIVE=20

LOG_LEVEL=INFO
LOG_FORMAT=json
