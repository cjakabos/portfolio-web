/* eslint-disable */
// Generated by scripts/contracts/openapi_contracts.py from contracts/openapi/petstore.json
// Source API: Petstore API v1

export const PETSTORE_OPERATIONS = [
  {
    id: "getPets",
    method: "GET",
    path: "/pet",
    summary: "",
    tags: ["pet-controller"] as const,
    pathParams: [] as const,
    queryParams: [] as const,
    hasRequestBody: false,
    responseStatuses: ["200"] as const,
  },
  {
    id: "savePet",
    method: "POST",
    path: "/pet",
    summary: "",
    tags: ["pet-controller"] as const,
    pathParams: [] as const,
    queryParams: [] as const,
    hasRequestBody: true,
    responseStatuses: ["200"] as const,
  },
  {
    id: "getPetsByOwner",
    method: "GET",
    path: "/pet/owner/{ownerId}",
    summary: "",
    tags: ["pet-controller"] as const,
    pathParams: ["ownerId"] as const,
    queryParams: [] as const,
    hasRequestBody: false,
    responseStatuses: ["200"] as const,
  },
  {
    id: "deletePet",
    method: "DELETE",
    path: "/pet/{id}",
    summary: "",
    tags: ["pet-controller"] as const,
    pathParams: ["id"] as const,
    queryParams: [] as const,
    hasRequestBody: false,
    responseStatuses: ["200"] as const,
  },
  {
    id: "getPet",
    method: "GET",
    path: "/pet/{petId}",
    summary: "",
    tags: ["pet-controller"] as const,
    pathParams: ["petId"] as const,
    queryParams: [] as const,
    hasRequestBody: false,
    responseStatuses: ["200"] as const,
  },
  {
    id: "updatePet",
    method: "PUT",
    path: "/pet/{petId}",
    summary: "",
    tags: ["pet-controller"] as const,
    pathParams: ["petId"] as const,
    queryParams: [] as const,
    hasRequestBody: true,
    responseStatuses: ["200"] as const,
  },
  {
    id: "getAllSchedules",
    method: "GET",
    path: "/schedule",
    summary: "",
    tags: ["schedule-controller"] as const,
    pathParams: [] as const,
    queryParams: [] as const,
    hasRequestBody: false,
    responseStatuses: ["200"] as const,
  },
  {
    id: "createSchedule",
    method: "POST",
    path: "/schedule",
    summary: "",
    tags: ["schedule-controller"] as const,
    pathParams: [] as const,
    queryParams: [] as const,
    hasRequestBody: true,
    responseStatuses: ["200"] as const,
  },
  {
    id: "getScheduleForCustomer",
    method: "GET",
    path: "/schedule/customer/{customerId}",
    summary: "",
    tags: ["schedule-controller"] as const,
    pathParams: ["customerId"] as const,
    queryParams: [] as const,
    hasRequestBody: false,
    responseStatuses: ["200"] as const,
  },
  {
    id: "getScheduleForEmployee",
    method: "GET",
    path: "/schedule/employee/{employeeId}",
    summary: "",
    tags: ["schedule-controller"] as const,
    pathParams: ["employeeId"] as const,
    queryParams: [] as const,
    hasRequestBody: false,
    responseStatuses: ["200"] as const,
  },
  {
    id: "getScheduleForPet",
    method: "GET",
    path: "/schedule/pet/{petId}",
    summary: "",
    tags: ["schedule-controller"] as const,
    pathParams: ["petId"] as const,
    queryParams: [] as const,
    hasRequestBody: false,
    responseStatuses: ["200"] as const,
  },
  {
    id: "deleteSchedule",
    method: "DELETE",
    path: "/schedule/{scheduleId}",
    summary: "",
    tags: ["schedule-controller"] as const,
    pathParams: ["scheduleId"] as const,
    queryParams: [] as const,
    hasRequestBody: false,
    responseStatuses: ["200"] as const,
  },
  {
    id: "test",
    method: "GET",
    path: "/test",
    summary: "",
    tags: ["petstore-controller"] as const,
    pathParams: [] as const,
    queryParams: [] as const,
    hasRequestBody: false,
    responseStatuses: ["200"] as const,
  },
  {
    id: "getAllCustomers",
    method: "GET",
    path: "/user/customer",
    summary: "",
    tags: ["user-controller"] as const,
    pathParams: [] as const,
    queryParams: [] as const,
    hasRequestBody: false,
    responseStatuses: ["200"] as const,
  },
  {
    id: "saveCustomer",
    method: "POST",
    path: "/user/customer",
    summary: "",
    tags: ["user-controller"] as const,
    pathParams: [] as const,
    queryParams: [] as const,
    hasRequestBody: true,
    responseStatuses: ["200"] as const,
  },
  {
    id: "getOwnerByPet",
    method: "GET",
    path: "/user/customer/pet/{petId}",
    summary: "",
    tags: ["user-controller"] as const,
    pathParams: ["petId"] as const,
    queryParams: [] as const,
    hasRequestBody: false,
    responseStatuses: ["200"] as const,
  },
  {
    id: "deleteCustomer",
    method: "DELETE",
    path: "/user/customer/{customerId}",
    summary: "",
    tags: ["user-controller"] as const,
    pathParams: ["customerId"] as const,
    queryParams: [] as const,
    hasRequestBody: false,
    responseStatuses: ["200"] as const,
  },
  {
    id: "getAllEmployees",
    method: "GET",
    path: "/user/employee",
    summary: "",
    tags: ["user-controller"] as const,
    pathParams: [] as const,
    queryParams: [] as const,
    hasRequestBody: false,
    responseStatuses: ["200"] as const,
  },
  {
    id: "saveEmployee",
    method: "POST",
    path: "/user/employee",
    summary: "",
    tags: ["user-controller"] as const,
    pathParams: [] as const,
    queryParams: [] as const,
    hasRequestBody: true,
    responseStatuses: ["200"] as const,
  },
  {
    id: "findEmployeesForService",
    method: "POST",
    path: "/user/employee/availability",
    summary: "",
    tags: ["user-controller"] as const,
    pathParams: [] as const,
    queryParams: [] as const,
    hasRequestBody: true,
    responseStatuses: ["200"] as const,
  },
  {
    id: "deleteEmployee",
    method: "DELETE",
    path: "/user/employee/{employeeId}",
    summary: "",
    tags: ["user-controller"] as const,
    pathParams: ["employeeId"] as const,
    queryParams: [] as const,
    hasRequestBody: false,
    responseStatuses: ["200"] as const,
  },
  {
    id: "getEmployee",
    method: "GET",
    path: "/user/employee/{employeeId}",
    summary: "",
    tags: ["user-controller"] as const,
    pathParams: ["employeeId"] as const,
    queryParams: [] as const,
    hasRequestBody: false,
    responseStatuses: ["200"] as const,
  },
  {
    id: "setAvailability",
    method: "PUT",
    path: "/user/employee/{employeeId}",
    summary: "",
    tags: ["user-controller"] as const,
    pathParams: ["employeeId"] as const,
    queryParams: [] as const,
    hasRequestBody: true,
    responseStatuses: ["200"] as const,
  },
] as const;

export type PetstoreOperation = typeof PETSTORE_OPERATIONS[number];
export type PetstoreOperationId = PetstoreOperation["id"];
export type PetstoreOperationMethod = PetstoreOperation["method"];
export type PetstoreOperationPath = PetstoreOperation["path"];

export const petstoreOperationById: Record<PetstoreOperationId, PetstoreOperation> =
  Object.fromEntries(PETSTORE_OPERATIONS.map((op) => [op.id, op])) as Record<PetstoreOperationId, PetstoreOperation>;

export type RequestQueryValue = string | number | boolean | null | undefined;
export type RequestQuery = Record<string, RequestQueryValue | RequestQueryValue[]>;

export interface OperationRequestOptions {
  pathParams?: Record<string, string | number>;
  query?: RequestQuery;
  body?: unknown;
  headers?: HeadersInit;
  credentials?: RequestCredentials;
  signal?: AbortSignal;
}

export interface PetstoreClientConfig {
  baseUrl: string;
  defaultHeaders?: HeadersInit;
  defaultCredentials?: RequestCredentials;
  fetchImpl?: typeof fetch;
}

function buildUrl(pathTemplate: string, baseUrl: string, pathParams: Record<string, string | number> = {}, query?: RequestQuery) {
  const substituted = pathTemplate.replace(/{([^}/]+)}/g, (_, key: string) => {
    const value = pathParams[key];
    if (value === undefined || value === null) {
      throw new Error(`Missing path param: ${key}`);
    }
    return encodeURIComponent(String(value));
  });

  const url = new URL(substituted, baseUrl.endsWith("/") ? baseUrl : `${baseUrl}/`);
  if (query) {
    for (const [key, raw] of Object.entries(query)) {
      if (raw === undefined || raw === null) continue;
      if (Array.isArray(raw)) {
        for (const value of raw) {
          if (value === undefined || value === null) continue;
          url.searchParams.append(key, String(value));
        }
      } else {
        url.searchParams.set(key, String(raw));
      }
    }
  }
  return url.toString();
}

export class PetstoreApiClient {
  private readonly baseUrl: string;
  private readonly defaultHeaders?: HeadersInit;
  private readonly defaultCredentials?: RequestCredentials;
  private readonly fetchImpl: typeof fetch;

  constructor(config: PetstoreClientConfig) {
    this.baseUrl = config.baseUrl;
    this.defaultHeaders = config.defaultHeaders;
    this.defaultCredentials = config.defaultCredentials;
    this.fetchImpl = config.fetchImpl ?? fetch;
  }

  async request<T = unknown>(operationId: PetstoreOperationId, options: OperationRequestOptions = {}): Promise<T> {
    const op = petstoreOperationById[operationId];
    const url = buildUrl(op.path, this.baseUrl, options.pathParams, options.query);
    const headers = new Headers(this.defaultHeaders);
    if (options.headers) {
      new Headers(options.headers).forEach((value, key) => headers.set(key, value));
    }
    let body: BodyInit | undefined;
    if (options.body !== undefined) {
      if (!headers.has("Content-Type")) {
        headers.set("Content-Type", "application/json");
      }
      body = headers.get("Content-Type")?.includes("application/json")
        ? JSON.stringify(options.body)
        : (options.body as BodyInit);
    }

    const response = await this.fetchImpl(url, {
      method: op.method,
      headers,
      body,
      credentials: options.credentials ?? this.defaultCredentials,
      signal: options.signal,
    });

    if (!response.ok) {
      const text = await response.text().catch(() => "");
      throw new Error(`API request failed (${op.method} ${op.path}): ${response.status} ${text}`);
    }

    if (response.status === 204) {
      return undefined as T;
    }
    return (await response.json()) as T;
  }
}
